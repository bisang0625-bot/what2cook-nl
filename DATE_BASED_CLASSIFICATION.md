# 📅 날짜 기반 자동 분류 시스템

## ✅ 구현 완료

### 1. 날짜 파싱 유틸리티
- **`scrapers/utils/date_parser.py`**:
  - 네덜란드어 날짜 파싱 (`parse_dutch_date`, `parse_sale_period`)
  - Fallback 날짜 생성 (`fallback_dates`)
  - 날짜 뱃지 포맷팅 (`format_date_badge`)

### 2. 프론트엔드 자동 분류
- **`app/page.tsx`**:
  - 오늘 날짜 기준으로 레시피 자동 분류
  - **"지금 할인"** 탭: `valid_from <= TODAY <= valid_until`
  - **"곧 시작"** 탭: `valid_from > TODAY`
  - 데이터 없을 때 친절한 메시지 표시

### 3. 날짜 뱃지 UI
- **`components/Dashboard.tsx`**:
  - 레시피 카드에 날짜 뱃지 표시
  - **활성 세일**: `🔥 D-3 (1/15까지)` (빨간색)
  - **곧 시작**: `📅 1/13(월) 오픈` (파란색)

### 4. 데이터 스키마
```json
{
  "valid_from": "2026-01-12T00:00:00",
  "valid_until": "2026-01-18T23:59:59"
}
```

---

## 🎯 동작 방식

### 크롤러
1. 각 마트의 세일 기간 파싱 시도
2. 실패 시 fallback: 현재 주 또는 다음 주 월요일~일요일
3. `valid_from`, `valid_until` 필드에 ISO 형식으로 저장

### 레시피 생성기
1. 세일 데이터의 `valid_from`, `valid_until` 사용
2. 레시피에 동일한 날짜 정보 추가

### 프론트엔드
1. 오늘 날짜와 비교하여 자동 분류
2. 각 레시피 카드에 날짜 뱃지 표시
3. 탭별로 적절한 메시지 표시

---

## 📊 탭 분류 로직

### 지금 할인 탭
- 조건: `valid_from <= 오늘 <= valid_until`
- 표시: 남은 일수 강조 (`🔥 D-3 (1/15까지)`)
- 목적: 오늘 당장 구매 가능한 세일

### 곧 시작 탭
- 조건: `valid_from > 오늘`
- 표시: 시작 요일 강조 (`📅 1/13(월) 오픈`)
- 목적: 미래에 시작될 세일 (미리 준비)

---

## 🚀 사용 방법

### 1. 크롤링
```bash
python3 scrapers/hybrid_scraper.py
```

### 2. 레시피 생성
```bash
python3 recipe_matcher.py
```

### 3. 웹사이트 확인
```bash
npm run dev
# http://localhost:3000 접속
# 상단 탭으로 "지금 할인" / "곧 시작" 전환
```

---

## 💡 향후 개선 사항

1. **날짜 파싱 강화**: 각 마트별 세일 기간 텍스트 패턴 추가
2. **실시간 업데이트**: 오늘 날짜가 바뀌면 자동으로 탭 내용 갱신
3. **마트별 세일 시작일 표시**: 각 마트의 세일 시작 요일 표시

---

## ⚠️ 참고사항

- 현재는 fallback 로직으로 주 단위 날짜 사용
- 실제 세일 기간 텍스트 파싱은 각 마트마다 다를 수 있음
- 날짜 정보가 없는 레시피는 "지금 할인" 탭에 기본 표시 (하위 호환성)
